### 全局变量

惭愧，学习C++这么久，若不是因为工作需要用到都不能彻底领会里面全局变量的一些基本用法。智硬啊。。。



1. static

   经常会看到一些项目中写一些static const xxx来表示一些全局常亮，也因为面试题一直都知道，static变量作用范围会仅限于本文件，但是万万没想到的是。。。当你需要的是一个真正全局共享，然后用static int 之类的屡屡修改不成功怀疑人生的时候，才幡然醒悟----这玩意是个到处copy的变量！之前因为变量命名影响整个global命名空间问题而忌讳使用的全局变量才是你真正的救星！况且static对命名空间的整洁也没啥用！static const 有点脱裤子放屁的意思。

   也就是说 static const type a;实际会导致多文件项目下每个文件域都有个copy。

   如果你声明为可变的static，那么注意可能你调用改变这些静态变量的函数是在哪个文件下的，是否真的改变了你想要的那个copy的值？！

2. global

   这个才是真正的全局，带来的影响也就是老生常谈的全局命名空间污染。声明方式为头文件中加extern声明不定义，.cpp文件中定义即可。这里的extern表示这个地方只是声明而非定义（编译器需要知道）

3. namespace

   污染命名空间？看看标准库怎么实现的？其实这些应该入门就知道了，但是一直没用到的话都没有认真去看待这几个之间的真正联系。通过namespace的隔离，就可以彻底完成对这个全局变量的安全使用了！

4. notice:多文件下全局声明

   注意！不要在头文件中定义！会导致重复定义的编译错误！因为声明的时候是不分配内存的，但是你定义的话，就gg了，然后没包含一次都会再一次重复分配这个东东，自然就重复了！



~~~c++
//file1.h
namespace Mylib{
  extern int a;
  void f();
}
/*******/

//file1.cpp
int Mylib::a = 10;
void Mylib::f(){
  //do sth
}
/**************/

//file2.cpp
#include "file1.h"
using Mylib::a;
~~~

