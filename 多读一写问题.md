### Question

多个线程对某个变量(一段buffer)进行读取，一个线程进行写，要求不用锁，如何同步？

### Request

分析得到以下条件：

1. 多读不互斥，读写、多写互斥
2. 一读一写同时发生，读取的是旧数据or新数据？
3. 多读同时发生，且个别读的有点久时，数据一致性的要求?(假设阶梯状的读取速率，一致性岂不是保持的是非常旧的？)
4. 最终一致性（写完后的某个时间点）

### Method

1. sqlite的wal机制
2. 网上的双buffer方法